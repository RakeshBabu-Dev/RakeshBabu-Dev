<div class="container mt-5">
  <h2 class="mb-4">Register</h2>
  <form [formGroup]="registerForm" (ngSubmit)="onRegister()">

    <!-- Name Field -->
    <div class="form-group">
      <label for="name">Name</label>
      <input
        type="text"
        id="name"
        formControlName="name"
        class="form-control"
        placeholder="Enter your name"
      />
      <div *ngIf="registerForm.get('name')!.touched && registerForm.get('name')!.invalid" class="text-danger">
        <small *ngIf="registerForm.get('name')!.errors?.['required']">Name is required.</small>
        <small *ngIf="registerForm.get('name')!.errors?.['minlength']">Name must be at least 3 characters.</small>
      </div>
    </div>

    <!-- Email Field -->
    <div class="form-group">
      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        formControlName="email"
        class="form-control"
        placeholder="Enter your email"
      />
      <div *ngIf="registerForm.get('email')!.touched && registerForm.get('email')!.invalid" class="text-danger">
        <small *ngIf="registerForm.get('email')!.errors?.['required']">Email is required.</small>
        <small *ngIf="registerForm.get('email')!.errors?.['email']">Please enter a valid email.</small>
      </div>
    </div>

    <!-- Password Field -->
    <div class="form-group">
      <label for="password">Password</label>
      <input
        [type]="isPasswordVisible ? 'text' : 'password'"
        id="password"
        formControlName="password"
        class="form-control"
        placeholder="Enter your password"
      />
      <div *ngIf="registerForm.get('password')!.touched && registerForm.get('password')!.invalid" class="text-danger">
        <small *ngIf="registerForm.get('password')!.errors?.['required']">Password is required.</small>
        <small *ngIf="registerForm.get('password')!.errors?.['minlength']">Password must be at least 6 characters long.</small>
        <small *ngIf="registerForm.get('password')!.errors?.['pattern']">Password must include at least one uppercase letter, one number, and one special character.</small>
      </div>
    </div>

    <!-- Confirm Password Field -->
    <div class="form-group">
      <label for="confirmPassword">Confirm Password</label>
      <input
        [type]="isConfirmPasswordVisible ? 'text' : 'password'"
        id="confirmPassword"
        formControlName="confirmPassword"
        class="form-control"
        placeholder="Confirm your password"
      />
      <div *ngIf="registerForm.get('confirmPassword')!.touched && registerForm.get('confirmPassword')!.invalid" class="text-danger">
        <small *ngIf="registerForm.get('confirmPassword')!.errors?.['required']">Confirming the password is required.</small>
      </div>
      <div *ngIf="!doPasswordsMatch && registerForm.get('confirmPassword')?.touched" class="text-danger">
        Passwords do not match.
      </div>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="text-danger mt-2">
      {{ errorMessage }}
    </div>

    <!-- Success Message -->
    <div *ngIf="successMessage" class="text-success mt-2">
      {{ successMessage }}
    </div>

    <!-- Password visibility toggle button -->
    <div class="form-group mt-3">
      <button type="button" class="btn btn-secondary" (click)="togglePasswordVisibility()">
        {{ isPasswordVisible && isConfirmPasswordVisible ? 'Hide Passwords' : 'Show Passwords' }}
      </button>
    </div>

    <!-- Register Button -->
    <button type="submit" class="btn btn-primary mt-3" [disabled]="registerForm.invalid">Register</button>

    <!-- Back to Login Button -->
    <button type="button" class="btn btn-link mt-3" (click)="goBack()">Back to Login</button>
  </form>
</div>
